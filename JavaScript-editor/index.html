<!DOCTYPE html>
<html lang="en">
  <head>
    <title>WebSim - JavaScript </title>
    <meta charset="utf-8" />
    <!-- Physics for A-Frame VR -->
    <link rel="stylesheet" type="text/css" href="css/main.css"></link>
    <script src="js/ace-editor/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="build/websim.bundle.js"></script>
    <script src="build/editor.bundle.js"></script>
    <script type="text/javascript" src="../simcore/utils/jsgl.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>
    <script>
      var config_evaluator = "evaluator_follow_line.js";
      var evaluator_icon1 = "../assets/resources/car1.svg";
      var evaluator_icon2 = "../assets/resources/car2.svg";
    </script>
    <script>var config_file = '../assets/config/config_forest.json';</script>
  </head>
  <body>
    <nav id="navbar">
      <a href="/index.html" ><img src="../assets/resources/jderobot.svg" alt="JdeRobot logo" style="width:70px; height:70px; margin-top: 6px;" /></a>
      <div id="nav-button-container">
        <button onclick id="resetRobot"><img src="../assets/resources/reset.png" alt="Reset button image"/></button>
        <button onclick id="runbtn"><img src="../assets/resources/play-icon.png" alt="Run button image"/></button>
        <button onclick id="simButton"><img src="../assets/resources/play-icon.png" alt="Run button image"/></button>
        <button onclick id="cambtn"><img src="../assets/resources/play-camera-icon.png" alt="Stop button image"/></button>
      </div>
    </nav>
    <div id="container">
      <div id="myIFrame">
      </div>
      <div id="right-container">
        <div id="ace">

          // Press Ctrl-, to enter code editor configuration.
          /*
          A global variable called myRobot that
          contains robot instance,
          you can call the robot API
          shown in https://github.com/JdeRobot/WebSim/blob/master/README.md

          Example:
            myRobot.move(0.2, 0.2);
          */

          myRobot.move(1, 0, 0);
          console.log('Executing')
          while(true){

              way= await myRobot.getMinorDistance()
              console.log(way);
              if (way=="left"){
                    myRobot.turnUpTo(-13)
              }
              if(way == "right"){
                    myRobot.turnUpTo(13)
              }
              if(way=="center"){
                    myRobot.turnUpTo(13)
              }
          }

        
        </div>
        <div id="cameras" style="display:inline-flex;">
            <div id="cameraOpenCV" style="margin-left: 5px; margin-right: 15px;">
                <p>OpenCV image</p>
                <canvas id="outputCanvas" style="width:150px; height:100px; display: none" ></canvas>
            </div>
            <div id="robotCam">
                <p>Robot Camera</p>
                <div id="spectatorDiv" style="width: 150px; height: 100px;"></div>
            </div>
        </div>
    <script type="text/javascript" src="../simcore/utils/opencv3.3.1.js" ></script>
  </body>
</html>
